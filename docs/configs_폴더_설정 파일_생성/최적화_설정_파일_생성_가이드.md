# ğŸ“ˆ ìµœì í™” ì„¤ì • íŒŒì¼ ìƒì„± ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [ìµœì í™” íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜](#ìµœì í™”-íŒŒì´í”„ë¼ì¸-ì•„í‚¤í…ì²˜)
2. [ì„¤ì • íŒŒì¼ êµ¬ì¡° ë¶„ì„](#ì„¤ì •-íŒŒì¼-êµ¬ì¡°-ë¶„ì„)
3. [ì„¤ì •ê°’ ìƒì„¸ ê°€ì´ë“œ](#ì„¤ì •ê°’-ìƒì„¸-ê°€ì´ë“œ)
4. [Optuna í•˜ì´í¼íŒŒë¼ë¯¸í„° íƒìƒ‰](#optuna-í•˜ì´í¼íŒŒë¼ë¯¸í„°-íƒìƒ‰)
5. [ì‹¤ë¬´ ì˜ˆì œ í…œí”Œë¦¿](#ì‹¤ë¬´-ì˜ˆì œ-í…œí”Œë¦¿)
6. [ì„±ëŠ¥ ìµœì í™” ì „ëµ](#ì„±ëŠ¥-ìµœì í™”-ì „ëµ)
7. [ë¬¸ì œí•´ê²° ê°€ì´ë“œ](#ë¬¸ì œí•´ê²°-ê°€ì´ë“œ)

---

## ğŸ—ï¸ ìµœì í™” íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ğŸ“ Config Files"
        A[configs/optuna_config.yaml<br/>ì •ë°€ ìµœì í™” ì„¤ì •<br/>50+ trials]
        B[configs/optuna_fast_config.yaml<br/>ë¹ ë¥¸ ìµœì í™” ì„¤ì •<br/>10-20 trials]
    end
    
    subgraph "ğŸ” Optimization Engine"
        C[src/optimization/optuna_tuner.py<br/>Optuna íŠœë„ˆ<br/>ë² ì´ì§€ì•ˆ ìµœì í™”]
        D[src/optimization/hyperopt_utils.py<br/>í•˜ì´í¼íŒŒë¼ë¯¸í„° ìœ í‹¸<br/>íƒìƒ‰ ê³µê°„ ì •ì˜]
    end
    
    subgraph "ğŸ¯ Search Space"
        E[í•™ìŠµë¥ <br/>ë¡œê·¸ ìŠ¤ì¼€ì¼ íƒìƒ‰<br/>1e-6 ~ 1e-2]
        F[ë°°ì¹˜ í¬ê¸°<br/>GPU ë©”ëª¨ë¦¬ ê¸°ë°˜<br/>16, 32, 48, 64]
        G[ì •ê·œí™”<br/>ë“œë¡­ì•„ì›ƒ, Weight Decay<br/>ê³¼ì í•© ë°©ì§€]
        H[ëª¨ë¸ íŒŒë¼ë¯¸í„°<br/>ì•„í‚¤í…ì²˜ë³„ ìµœì í™”<br/>Drop Path, Pooling]
    end
    
    subgraph "âš¡ Optimization Strategy"
        I[TPE Sampler<br/>Tree-structured Parzen Estimator<br/>íš¨ìœ¨ì  íƒìƒ‰]
        J[Median Pruner<br/>ì¡°ê¸° ì¤‘ë‹¨<br/>ì‹œê°„ ì ˆì•½]
        K[Multi-Objective<br/>F1-Score vs í•™ìŠµ ì‹œê°„<br/>ê· í˜• ìµœì í™”]
    end
    
    subgraph "ğŸ’¾ Output"
        L[ìµœì í™” ê²°ê³¼<br/>experiments/optimization/<br/>ìµœì  í•˜ì´í¼íŒŒë¼ë¯¸í„°]
        M[ìµœì í™” ì„¤ì • íŒŒì¼<br/>train_optimized_*.yaml<br/>ì¦‰ì‹œ í•™ìŠµ ê°€ëŠ¥]
        N[ì„±ëŠ¥ ë¶„ì„ ë¦¬í¬íŠ¸<br/>optuna_study_report.html<br/>ì‹œê°í™” ê²°ê³¼]
    end
    
    A --> C
    B --> C
    C --> D
    
    D --> E
    D --> F
    D --> G
    D --> H
    
    C --> I
    C --> J
    C --> K
    
    I --> L
    J --> M
    K --> N
    
    style A fill:#e3f2fd, color:#000000
    style B fill:#f3e5f5, color:#000000
    style C fill:#fff3e0, color:#000000
    style L fill:#e8f5e8, color:#000000
    style M fill:#ffcdd2, color:#000000
    style N fill:#ffebee, color:#000000
```

---

## ğŸ“Š ì„¤ì • íŒŒì¼ êµ¬ì¡° ë¶„ì„

### ğŸ“‹ ìµœì í™” ì„¤ì • íŒŒì¼ ë¹„êµí‘œ

| ì„¤ì • íŒŒì¼ | ëª©ì  | Trial ìˆ˜ | ì˜ˆìƒ ì‹œê°„ | íƒìƒ‰ ì •ë°€ë„ | ê¶Œì¥ ì‚¬ìš©ì²˜ |
|---------|-----|---------|---------|----------|----------|
| `optuna_config.yaml` | ì •ë°€ ìµœì í™” | 50-100 | 4-8ì‹œê°„ | â­â­â­â­â­ | **ìµœì¢… ëŒ€íšŒ ì œì¶œìš©** |
| `optuna_fast_config.yaml` | ë¹ ë¥¸ íƒìƒ‰ | 10-20 | 1-2ì‹œê°„ | â­â­â­â­ | í”„ë¡œí† íƒ€ì…, ì‹¤í—˜ |

### ğŸ¯ ìµœì í™” ì „ëµ ì„ íƒ ê°€ì´ë“œ

```mermaid
flowchart TD
    A[ìµœì í™” ëª©í‘œ] --> B{ê°€ìš© ì‹œê°„}
    
    B -->|1-2ì‹œê°„| C[optuna_fast_config.yaml<br/>ë¹ ë¥¸ íƒìƒ‰<br/>20 trials]
    B -->|4-8ì‹œê°„| D[optuna_config.yaml<br/>ì •ë°€ íƒìƒ‰<br/>100 trials]
    B -->|í•˜ë£¨ ì´ìƒ| E[Custom Large Scale<br/>500+ trials<br/>Grid + Random]
    
    C --> F[ë² ì´ìŠ¤ë¼ì¸ +2~5%]
    D --> G[ë² ì´ìŠ¤ë¼ì¸ +5~10%]
    E --> H[ë² ì´ìŠ¤ë¼ì¸ +10~15%]
    
    style C fill:#e3f2fd, color:#000000
    style D fill:#f3e5f5, color:#000000
    style E fill:#ffcdd2, color:#000000
    style G fill:#e8f5e8, color:#000000
```

---

## ğŸ“– ì„¤ì •ê°’ ìƒì„¸ ê°€ì´ë“œ

### 1. ğŸ¯ **optuna** ì„¹ì…˜ - í•µì‹¬ ìµœì í™” ì„¤ì •

```yaml
optuna:
  enabled: true                           # âœ… Optuna ìµœì í™” í™œì„±í™”
  n_trials: 100                          # ğŸ”„ ì‹œë„ íšŸìˆ˜ (ì •ë°€ë„â†”ì‹œê°„ íŠ¸ë ˆì´ë“œì˜¤í”„)
  timeout: 7200                          # â° ìµœëŒ€ ì‹œê°„ (ì´ˆë‹¨ìœ„)
  study_name: "document-classification-optimization"  # ğŸ·ï¸ ìŠ¤í„°ë”” ì´ë¦„
  direction: "maximize"                   # ğŸ“ˆ ìµœì í™” ë°©í–¥ (F1-Score ìµœëŒ€í™”)
```

#### ğŸ“Š n_trials vs ì„±ëŠ¥ ê°œì„  ë¶„ì„

| Trial ìˆ˜ | ì˜ˆìƒ ì‹œê°„ | ì„±ëŠ¥ ê°œì„  | ì•ˆì •ì„± | ì¶”ì²œ ìš©ë„ |
|---------|---------|----------|-------|---------|
| 10 | 30ë¶„ | +2% | â­â­ | ë¹ ë¥¸ í™•ì¸ |
| 20 | 1ì‹œê°„ | +3% | â­â­â­ | ì‹¤í—˜ìš© |
| 50 | 3ì‹œê°„ | +5% | â­â­â­â­ | ì‹¤ë¬´ìš© |
| 100 | 6ì‹œê°„ | +7% | â­â­â­â­â­ | **ëŒ€íšŒ ì œì¶œìš©** |
| 200+ | 12ì‹œê°„+ | +8%+ | â­â­â­â­â­ | ìµœì¢… ìµœì í™” |

---

### 2. âœ‚ï¸ **pruning** ì„¹ì…˜ - ì¡°ê¸° ì¤‘ë‹¨ ì„¤ì •

```yaml
pruning:
  enabled: true                           # âœ… ì¡°ê¸° ì¤‘ë‹¨ í™œì„±í™”
  patience: 5                            # â³ ì„±ëŠ¥ ê°œì„  ëŒ€ê¸° ì—í¬í¬
  n_startup_trials: 15                   # ğŸš€ ì´ˆê¸° ëœë¤ íƒìƒ‰ íšŸìˆ˜
```

#### ğŸ”§ Pruning ì „ëµ ìµœì í™”

| Patience | íš¨ê³¼ | ì‹œê°„ ì ˆì•½ | ì •í™•ë„ ì†ì‹¤ | ê¶Œì¥ ìƒí™© |
|----------|-----|---------|----------|---------|
| 3 | ë§¤ìš° ê³µê²©ì  | 50-70% | 2-3% | ë¹ ë¥¸ íƒìƒ‰ |
| 5 | ê· í˜•ì  | 30-50% | 1-2% | **ì¼ë°˜ì  ì‚¬ìš©** |
| 10 | ë³´ìˆ˜ì  | 10-30% | 0-1% | ì •ë°€ ìµœì í™” |

---

### 3. âš¡ **quick_validation** ì„¹ì…˜ - ë¹ ë¥¸ ê²€ì¦ ì„¤ì •

```yaml
quick_validation:
  epochs: 5                              # ğŸ”„ ë¹ ë¥¸ ê²€ì¦ìš© ì—í¬í¬ (ì‹œê°„ ë‹¨ì¶•)
  folds: 3                               # ğŸ“‚ ê²€ì¦ í´ë“œ ìˆ˜ (5 â†’ 3ìœ¼ë¡œ ê°ì†Œ)
  batch_size_override: 32                # ğŸ“¦ ê²€ì¦ìš© ë°°ì¹˜ í¬ê¸° (ë©”ëª¨ë¦¬ ìµœì í™”)
```

#### âš–ï¸ ë¹ ë¥¸ ê²€ì¦ vs ì •í™•ì„± íŠ¸ë ˆì´ë“œì˜¤í”„

| ì„¤ì • | ê²€ì¦ ì‹œê°„ | ìµœì í™” ì •í™•ë„ | ê¶Œì¥ ì‚¬ìš© |
|-----|---------|------------|---------|
| epochs: 3, folds: 3 | ë§¤ìš° ë¹ ë¦„ | 70-80% | ì´ˆê¸° íƒìƒ‰ |
| epochs: 5, folds: 3 | ë¹ ë¦„ | 80-90% | **ê· í˜•ì ** |
| epochs: 10, folds: 5 | ì •í™• | 95-100% | ìµœì¢… ê²€ì¦ |

---

## ğŸ” Optuna í•˜ì´í¼íŒŒë¼ë¯¸í„° íƒìƒ‰

### 4. ğŸ§ª **search_space** ì„¹ì…˜ - íƒìƒ‰ ê³µê°„ ì •ì˜

#### ğŸ“ˆ **í•™ìŠµë¥  (Learning Rate) ìµœì í™”**

```yaml
search_space:
  learning_rate:
    type: "loguniform"                    # ğŸ“Š ë¡œê·¸ ê· ë“± ë¶„í¬ (í•„ìˆ˜)
    low: 1e-5                            # ğŸ“‰ ìµœì†Œê°’ (ëŒ€í˜• ëª¨ë¸ìš©)
    high: 5e-3                           # ğŸ“ˆ ìµœëŒ€ê°’ (ì‘ì€ ëª¨ë¸ìš©)
```

**ğŸ¯ ëª¨ë¸ë³„ í•™ìŠµë¥  ê°€ì´ë“œ:**

| ëª¨ë¸ í¬ê¸° | ì¶”ì²œ ë²”ìœ„ | ìµœì ê°’ ì˜ˆì¸¡ | íŠ¹ì§• |
|---------|----------|----------|------|
| EfficientNet B3 (12M) | 5e-4 ~ 5e-3 | ~1e-3 | ë¹ ë¥¸ ìˆ˜ë ´ |
| ConvNeXt Base (89M) | 1e-5 ~ 1e-3 | ~5e-5 | ì•ˆì •ì  í•™ìŠµ |
| Swin Base (88M) | 1e-5 ~ 1e-3 | ~1e-4 | Transformer íŠ¹ì„± |

#### ğŸ“¦ **ë°°ì¹˜ í¬ê¸° ìµœì í™”**

```yaml
batch_size:
  type: "categorical"                     # ğŸ¯ ì¹´í…Œê³ ë¦¬ ì„ íƒ (GPU ë©”ëª¨ë¦¬ ì œì•½)
  choices: [16, 32, 48, 64]              # RTX 4090 ìµœì í™”
```

**ğŸ–¥ï¸ GPUë³„ ë°°ì¹˜ í¬ê¸° ê¶Œì¥ê°’:**

| GPU ëª¨ë¸ | ë©”ëª¨ë¦¬ | ì¶”ì²œ ë°°ì¹˜ í¬ê¸° | ìµœëŒ€ ì•ˆì „ í¬ê¸° | ì„±ëŠ¥ íš¨ìœ¨ |
|---------|-------|------------|------------|---------|
| RTX 4090 | 24GB | [32, 48, 64] | 128 | â­â­â­â­â­ |
| RTX 3080 | 10GB | [16, 32, 48] | 64 | â­â­â­â­ |
| RTX 3070 | 8GB | [16, 24, 32] | 48 | â­â­â­ |

#### ğŸ–¼ï¸ **ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”**

```yaml
img_size:
  type: "categorical"                     # ğŸ–¼ï¸ ì…ë ¥ í•´ìƒë„ ì„ íƒ
  choices: [224, 320, 384, 512]          # ì„±ëŠ¥â†”ë©”ëª¨ë¦¬ ê· í˜•
```

**ğŸ“ ì´ë¯¸ì§€ í¬ê¸°ë³„ ì„±ëŠ¥ ë¶„ì„:**

| í¬ê¸° | ë©”ëª¨ë¦¬ ì‚¬ìš© | í•™ìŠµ ì‹œê°„ | ì˜ˆìƒ ì„±ëŠ¥ | ê¶Œì¥ ìš©ë„ |
|-----|----------|---------|----------|---------|
| 224 | ê¸°ì¤€ Ã— 1 | ê¸°ì¤€ Ã— 1 | ê¸°ì¤€ + 0% | ë¹ ë¥¸ í”„ë¡œí† íƒ€ì… |
| 320 | ê¸°ì¤€ Ã— 2.1 | ê¸°ì¤€ Ã— 1.8 | ê¸°ì¤€ + 2% | ê· í˜•ì  ì„ íƒ |
| 384 | ê¸°ì¤€ Ã— 3.0 | ê¸°ì¤€ Ã— 2.5 | ê¸°ì¤€ + 4% | **ê³ ì„±ëŠ¥ ê¶Œì¥** |
| 512 | ê¸°ì¤€ Ã— 5.3 | ê¸°ì¤€ Ã— 4.2 | ê¸°ì¤€ + 5% | ìµœê³  ì„±ëŠ¥ |

#### âš–ï¸ **ì •ê·œí™” íŒŒë¼ë¯¸í„° ìµœì í™”**

```yaml
# Weight Decay (L2 ì •ê·œí™”)
weight_decay:
  type: "uniform"                         # ğŸ“Š ê· ë“± ë¶„í¬
  low: 0.01                              # ìµœì†Œ ì •ê·œí™”
  high: 0.1                              # ê°•í•œ ì •ê·œí™”

# Dropout ë¹„ìœ¨  
dropout:
  type: "uniform"                         # ğŸŒ§ï¸ ë“œë¡­ì•„ì›ƒ í™•ë¥ 
  low: 0.01                              # ìµœì†Œ ë“œë¡­ì•„ì›ƒ
  high: 0.15                             # ìµœëŒ€ ë“œë¡­ì•„ì›ƒ

# Drop Path (Stochastic Depth)
drop_path:
  type: "uniform"                         # ğŸ›¤ï¸ ê²½ë¡œ ë“œë¡­ í™•ë¥ 
  low: 0.0                               # ë“œë¡­íŒ¨ìŠ¤ ì—†ìŒ
  high: 0.3                              # ê°•í•œ ë“œë¡­íŒ¨ìŠ¤ (Transformerìš©)
```

#### ğŸšï¸ **ê³ ê¸‰ ìµœì í™” íŒŒë¼ë¯¸í„°**

```yaml
advanced_params:
  # ë¼ë²¨ ìŠ¤ë¬´ë”©
  label_smoothing:
    type: "uniform"
    low: 0.05                            # ì•½ê°„ì˜ ìŠ¤ë¬´ë”©
    high: 0.15                           # ê°•í•œ ìŠ¤ë¬´ë”©
  
  # ê·¸ë˜ë””ì–¸íŠ¸ í´ë¦¬í•‘
  grad_clip_norm:
    type: "uniform"
    low: 0.8                             # ì•½í•œ í´ë¦¬í•‘
    high: 1.5                            # ê°•í•œ í´ë¦¬í•‘
  
  # Mixup ì•ŒíŒŒ
  mixup_alpha:
    type: "uniform"
    low: 0.4                             # ì•½í•œ ë¯¹ìŠ¤ì—…
    high: 1.2                            # ê°•í•œ ë¯¹ìŠ¤ì—…
  
  # ì›œì—… ì—í¬í¬
  warmup_epochs:
    type: "categorical"
    choices: [0, 1, 2, 3]                # ì›œì—… ì „ëµ
```

---

## ğŸš€ ì‹¤ë¬´ ì˜ˆì œ í…œí”Œë¦¿

### Template 1: âš¡ ë¹ ë¥¸ í•˜ì´í¼íŒŒë¼ë¯¸í„° íƒìƒ‰ (1ì‹œê°„)

```yaml
# configs/optuna_prototype.yaml
optuna:
  enabled: true
  n_trials: 15                           # ë¹ ë¥¸ íƒìƒ‰
  timeout: 1800                          # 30ë¶„ ì œí•œ
  study_name: "prototype-optimization"
  direction: "maximize"

pruning:
  enabled: true
  patience: 3                            # ê³µê²©ì  ì¤‘ë‹¨
  n_startup_trials: 5

quick_validation:
  epochs: 3                              # ë§¤ìš° ë¹ ë¥¸ ê²€ì¦
  folds: 3
  batch_size_override: 32

search_space:
  learning_rate:
    type: "loguniform"
    low: 1e-4                            # ì¢ì€ ë²”ìœ„
    high: 1e-2
    
  batch_size:
    type: "categorical"
    choices: [32, 48]                    # ì œí•œëœ ì„ íƒ
    
  weight_decay:
    type: "uniform"
    low: 0.01
    high: 0.05                           # ë³´ìˆ˜ì  ë²”ìœ„
```

### Template 2: ğŸ¯ ê· í˜•ì  ìµœì í™” (3ì‹œê°„)

```yaml
# configs/optuna_balanced.yaml
optuna:
  enabled: true
  n_trials: 50                           # ê· í˜•ì  íƒìƒ‰
  timeout: 5400                          # 1.5ì‹œê°„ ì œí•œ
  study_name: "balanced-optimization"

search_space:
  # í•µì‹¬ íŒŒë¼ë¯¸í„° ì§‘ì¤‘ íƒìƒ‰
  learning_rate:
    type: "loguniform"
    low: 5e-6
    high: 5e-3
    
  batch_size:
    type: "categorical"
    choices: [16, 32, 48, 64]
    
  img_size:
    type: "categorical"
    choices: [320, 384]                  # ì„±ëŠ¥ ì¤‘ì‹¬
    
  # ì •ê·œí™” ì§‘ì¤‘
  dropout:
    type: "uniform"
    low: 0.05
    high: 0.15
    
  drop_path:
    type: "uniform"
    low: 0.05
    high: 0.2
```

### Template 3: ğŸ† ìµœê³  ì„±ëŠ¥ ìµœì í™” (8ì‹œê°„+)

```yaml
# configs/optuna_ultimate.yaml  
optuna:
  enabled: true
  n_trials: 150                          # ëŒ€ê·œëª¨ íƒìƒ‰
  timeout: 14400                         # 4ì‹œê°„ ì œí•œ
  study_name: "ultimate-optimization"

pruning:
  enabled: true
  patience: 7                            # ë³´ìˆ˜ì  ì¤‘ë‹¨
  n_startup_trials: 30                   # ì¶©ë¶„í•œ ì´ˆê¸° íƒìƒ‰

search_space:
  # ì „ì²´ íŒŒë¼ë¯¸í„° ê³µê°„ íƒìƒ‰
  learning_rate:
    type: "loguniform"
    low: 1e-6                            # ë§¤ìš° ë‚®ì€ LR
    high: 1e-2
    
  batch_size:
    type: "categorical"
    choices: [16, 24, 32, 40, 48, 56, 64]  # ì„¸ë°€í•œ ì„ íƒ
    
  img_size:
    type: "categorical"
    choices: [224, 288, 320, 384, 448]    # ë‹¤ì–‘í•œ í•´ìƒë„
    
  # ê³ ê¸‰ íŒŒë¼ë¯¸í„°
  advanced_params:
    label_smoothing:
      type: "uniform"
      low: 0.0
      high: 0.2
      
    mixup_alpha:
      type: "uniform"
      low: 0.0
      high: 1.5
      
    grad_clip_norm:
      type: "uniform"
      low: 0.5
      high: 2.0
      
    warmup_epochs:
      type: "categorical"
      choices: [0, 1, 2, 3, 5]
```

### Template 4: ğŸ® ëª¨ë¸ë³„ íŠ¹í™” ìµœì í™”

```yaml
# configs/optuna_convnext_specialized.yaml
# ConvNeXt ëª¨ë¸ íŠ¹í™” ìµœì í™”
optuna:
  study_name: "convnext-base-384-optimization"

search_space:
  # ConvNeXt íŠ¹í™” íŒŒë¼ë¯¸í„°
  learning_rate:
    type: "loguniform"
    low: 1e-5                            # ëŒ€í˜• ëª¨ë¸ì— ë§ëŠ” ë‚®ì€ LR
    high: 5e-4
    
  drop_path:                             # ConvNeXtì˜ í•µì‹¬ ì •ê·œí™”
    type: "uniform"
    low: 0.1
    high: 0.4
    
  layer_scale:                           # ConvNeXt ì „ìš© íŒŒë¼ë¯¸í„°
    type: "uniform"
    low: 1e-6
    high: 1e-4
```

---

## âš¡ ì„±ëŠ¥ ìµœì í™” ì „ëµ

### ğŸ¯ ìµœì í™” ëª©í‘œë³„ ì „ëµ

```mermaid
graph LR
    A[ìµœì í™” ëª©í‘œ] --> B[ì†ë„ ìš°ì„ <br/>1-2ì‹œê°„<br/>+3% ì„±ëŠ¥]
    A --> C[ê· í˜•<br/>3-4ì‹œê°„<br/>+5-7% ì„±ëŠ¥]  
    A --> D[ìµœê³  ì„±ëŠ¥<br/>8ì‹œê°„+<br/>+10%+ ì„±ëŠ¥]
    
    B --> E[n_trials: 20<br/>patience: 3<br/>epochs: 3]
    C --> F[n_trials: 50<br/>patience: 5<br/>epochs: 5]
    D --> G[n_trials: 150+<br/>patience: 7<br/>epochs: 10]
    
    style B fill:#ffcdd2, color:#000000
    style C fill:#e3f2fd, color:#000000
    style D fill:#c8e6c9, color:#000000
```

### ğŸ“Š íŒŒë¼ë¯¸í„° ì¤‘ìš”ë„ ë¶„ì„

| íŒŒë¼ë¯¸í„° | ì„±ëŠ¥ ì˜í–¥ | íƒìƒ‰ ìš°ì„ ìˆœìœ„ | ìµœì í™” ë‚œì´ë„ |
|---------|----------|------------|------------|
| **learning_rate** | â­â­â­â­â­ | 1ìˆœìœ„ | ë³´í†µ |
| **batch_size** | â­â­â­â­ | 2ìˆœìœ„ | ì‰¬ì›€ |
| **img_size** | â­â­â­â­ | 3ìˆœìœ„ | ì‰¬ì›€ |
| **weight_decay** | â­â­â­ | 4ìˆœìœ„ | ë³´í†µ |
| **dropout** | â­â­â­ | 5ìˆœìœ„ | ë³´í†µ |
| **drop_path** | â­â­ | 6ìˆœìœ„ | ì–´ë ¤ì›€ |
| **label_smoothing** | â­â­ | 7ìˆœìœ„ | ì‰¬ì›€ |

### ğŸ”§ GPU ë©”ëª¨ë¦¬ë³„ ìµœì í™” ì „ëµ

#### RTX 4090 (24GB) - ìµœê³  ì„±ëŠ¥ ì „ëµ
```yaml
search_space:
  batch_size:
    choices: [48, 64, 80, 96]            # ëŒ€ìš©ëŸ‰ ë°°ì¹˜
  img_size:
    choices: [384, 448, 512]             # ê³ í•´ìƒë„
  model_parallel: true                   # ëª¨ë¸ ë³‘ë ¬í™”
```

#### RTX 3080 (10GB) - ê· í˜• ì „ëµ  
```yaml
search_space:
  batch_size:
    choices: [24, 32, 40, 48]            # ì¤‘ê°„ ë°°ì¹˜
  img_size:
    choices: [320, 384]                  # ê· í˜• í•´ìƒë„
  mixed_precision: true                  # í˜¼í•© ì •ë°€ë„ í•„ìˆ˜
```

#### RTX 3070 (8GB) - íš¨ìœ¨ì„± ì „ëµ
```yaml
search_space:
  batch_size:
    choices: [16, 20, 24]                # ì‘ì€ ë°°ì¹˜
  img_size:
    choices: [224, 288, 320]             # ë‚®ì€ í•´ìƒë„
  gradient_checkpointing: true           # ë©”ëª¨ë¦¬ ì ˆì•½
```

---

## ğŸ”§ ë¬¸ì œí•´ê²° ê°€ì´ë“œ

### âŒ ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë“¤

#### 1. **Optuna ìŠ¤í„°ë”” ìƒì„± ì‹¤íŒ¨**
```bash
sqlalchemy.exc.OperationalError: database is locked
```
**í•´ê²° ë°©ë²•:**
```yaml
# ìŠ¤í„°ë””ëª…ì„ ê³ ìœ í•˜ê²Œ ë³€ê²½
optuna:
  study_name: "optimization_$(date +%Y%m%d_%H%M)"

# ë˜ëŠ” ê¸°ì¡´ ìŠ¤í„°ë”” ì‚­ì œ
# rm -rf optuna_studies/
```

#### 2. **Trial ì¡°ê¸° ì¤‘ë‹¨ ê³¼ë‹¤**
```bash
INFO: Trial was pruned at epoch 2
```
**í•´ê²° ë°©ë²•:**
```yaml
pruning:
  enabled: true
  patience: 7                            # ë” ê´€ëŒ€í•œ ì„¤ì •
  n_startup_trials: 20                   # ì´ˆê¸° íƒìƒ‰ ì¦ê°€
```

#### 3. **ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ Trial ì‹¤íŒ¨**
```bash
RuntimeError: CUDA out of memory
```
**í•´ê²° ë°©ë²•:**
```yaml
quick_validation:
  batch_size_override: 16                # ë°°ì¹˜ í¬ê¸° ê°ì†Œ
  
search_space:
  batch_size:
    choices: [8, 16, 24]                 # ì‘ì€ ë°°ì¹˜ë“¤ë¡œ ì œí•œ
```

#### 4. **í•˜ì´í¼íŒŒë¼ë¯¸í„° íƒìƒ‰ ê³µê°„ ì˜¤ë¥˜**
```bash
ValueError: low >= high in uniform distribution
```
**í•´ê²° ë°©ë²•:**
- `low` < `high` í™•ì¸
- íƒ€ì…ë³„ ì ì ˆí•œ ë²”ìœ„ ì„¤ì •

### ğŸ¯ ìµœì í™” ì„±ëŠ¥ ë””ë²„ê¹…

#### ğŸ“Š **Optuna ê²°ê³¼ ë¶„ì„**
```bash
# ìµœì í™” ê²°ê³¼ í™•ì¸
python -c "
import optuna
study = optuna.load_study(study_name='your_study_name', storage='sqlite:///optuna_studies/optuna.db')
print('Best trial:')
print(f'  Value: {study.best_trial.value:.4f}')
print(f'  Params: {study.best_trial.params}')
"

# ìƒìœ„ 10ê°œ Trial í™•ì¸
python -c "
import optuna
study = optuna.load_study(study_name='your_study_name', storage='sqlite:///optuna_studies/optuna.db')
trials_df = study.trials_dataframe()
top_10 = trials_df.nlargest(10, 'value')
print(top_10[['value', 'params_learning_rate', 'params_batch_size']].to_string())
"
```

#### ğŸ” **ìµœì í™” ì‹œê°í™”**
```bash
# Optuna Dashboard ì‹¤í–‰
optuna-dashboard sqlite:///optuna_studies/optuna.db

# íŒŒë¼ë¯¸í„° ì¤‘ìš”ë„ ë¶„ì„
python -c "
import optuna
study = optuna.load_study(study_name='your_study_name', storage='sqlite:///optuna_studies/optuna.db')
importance = optuna.importance.get_param_importances(study)
for param, imp in importance.items():
    print(f'{param}: {imp:.4f}')
"
```

#### âš¡ **ìµœì í™” ì†ë„ í–¥ìƒ**
```bash
# ë³‘ë ¬ ìµœì í™” (ë©€í‹° í”„ë¡œì„¸ìŠ¤)
python src/optimization/optuna_optimize.py --config configs/optuna_config.yaml --n-jobs 4

# GPUë³„ ë³‘ë ¬ ì‹¤í–‰
CUDA_VISIBLE_DEVICES=0 python src/optimization/optuna_optimize.py --config configs/optuna_config.yaml &
CUDA_VISIBLE_DEVICES=1 python src/optimization/optuna_optimize.py --config configs/optuna_config.yaml &
```

### ğŸ“ˆ ì„±ëŠ¥ í–¥ìƒ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ğŸ¯ **íƒìƒ‰ ê³µê°„ ìµœì í™”**
- [ ] **í•™ìŠµë¥ **: ë¡œê·¸ ìŠ¤ì¼€ì¼, ëª¨ë¸ í¬ê¸°ì— ë§ëŠ” ë²”ìœ„
- [ ] **ë°°ì¹˜ í¬ê¸°**: GPU ë©”ëª¨ë¦¬ì— ë§ëŠ” ë²”ìœ„
- [ ] **ì´ë¯¸ì§€ í¬ê¸°**: ì„±ëŠ¥â†”ë©”ëª¨ë¦¬ ê· í˜•
- [ ] **ì •ê·œí™”**: ê³¼ì í•© ë°©ì§€ìš© íŒŒë¼ë¯¸í„°

#### âš¡ **ì‹¤í–‰ íš¨ìœ¨ì„±**
- [ ] **Pruning**: ì¡°ê¸° ì¤‘ë‹¨ìœ¼ë¡œ ì‹œê°„ ì ˆì•½
- [ ] **ë¹ ë¥¸ ê²€ì¦**: epoch/fold ìˆ˜ ìµœì í™”
- [ ] **ë³‘ë ¬ ì‹¤í–‰**: ë©€í‹° GPU í™œìš©
- [ ] **ìºì‹±**: ì¤‘ë³µ ê³„ì‚° ë°©ì§€

#### ğŸ“Š **ê²°ê³¼ ê²€ì¦**
- [ ] **êµì°¨ ê²€ì¦**: ê³¼ì í•© ë°©ì§€
- [ ] **ì•ˆì •ì„±**: ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰ ê²°ê³¼ ì¼ê´€ì„±
- [ ] **ì¼ë°˜í™”**: ë‹¤ë¥¸ ë°ì´í„°ì…‹ ì„±ëŠ¥
- [ ] **ì‹¤ì œ ì¶”ë¡ **: ìµœì í™” ê²°ê³¼ ì‹¤ì œ ì ìš©

---

## ğŸ“š ì‹¤í–‰ ê°€ì´ë“œ

### ğŸš€ ê¸°ë³¸ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ë¹ ë¥¸ ìµœì í™” (1ì‹œê°„)
python src/optimization/optuna_tuner.py --config configs/optuna_fast_config.yaml

# ì •ë°€ ìµœì í™” (4ì‹œê°„)  
python src/optimization/optuna_tuner.py --config configs/optuna_config.yaml

# ìµœì í™” ê²°ê³¼ë¡œ í•™ìŠµ ì‹¤í–‰
python src/training/train_main.py --config experiments/optimization/20250910/train_optimized_20250910_1234.yaml
```

### ğŸ“Š ê²°ê³¼ ë¶„ì„ ë° í™œìš©

```bash
# ìµœì í™” ê²°ê³¼ ì‹œê°í™”
python -c "
import optuna
study = optuna.load_study(study_name='document-classification-optimization')
fig = optuna.visualization.plot_optimization_history(study)
fig.write_html('optimization_history.html')
"

# ìµœì  íŒŒë¼ë¯¸í„° ì¶”ì¶œ
python -c "
import optuna, yaml
study = optuna.load_study(study_name='document-classification-optimization')
best_params = study.best_trial.params
print('ìµœì  íŒŒë¼ë¯¸í„°:')
print(yaml.dump(best_params, default_flow_style=False))
"
```

---

## ğŸ† ì„±ê³µì ì¸ ìµœì í™” ê°€ì´ë“œ

### Phase 1: íƒìƒ‰ì  ìµœì í™” (1-2ì‹œê°„)
1. **ë¹ ë¥¸ íƒìƒ‰**: `optuna_fast_config.yaml` ì‚¬ìš©
2. **íŒŒë¼ë¯¸í„° ì¤‘ìš”ë„**: ì˜í–¥ë ¥ í° íŒŒë¼ë¯¸í„° ì‹ë³„
3. **ë² ì´ìŠ¤ë¼ì¸**: í˜„ì¬ ì„±ëŠ¥ ëŒ€ë¹„ ê°œì„  í­ í™•ì¸

### Phase 2: ì§‘ì¤‘ì  ìµœì í™” (4-6ì‹œê°„)
1. **ì •ë°€ íƒìƒ‰**: `optuna_config.yaml` ì‚¬ìš©
2. **ë²”ìœ„ ì¡°ì •**: 1ë‹¨ê³„ ê²°ê³¼ë¡œ íƒìƒ‰ ë²”ìœ„ ì¶•ì†Œ
3. **ì•ˆì •ì„± ê²€ì¦**: ìƒìœ„ ì—¬ëŸ¬ íŒŒë¼ë¯¸í„° ì¡°í•© ê²€ì¦

### Phase 3: ìµœì¢… ìµœì í™” (8ì‹œê°„+)
1. **ëŒ€ê·œëª¨ íƒìƒ‰**: 500+ trials ì‹¤í–‰
2. **ì•™ìƒë¸” ìµœì í™”**: ì—¬ëŸ¬ ìµœì  íŒŒë¼ë¯¸í„° ì¡°í•©
3. **ì‹¤ì „ ê²€ì¦**: ì‹¤ì œ ì¶”ë¡  íŒŒì´í”„ë¼ì¸ì—ì„œ ì„±ëŠ¥ í™•ì¸

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Optuna ê³µì‹ ë¬¸ì„œ](https://optuna.readthedocs.io/)
- [í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](../../notebooks/optimization/)
- [GPU ìµœì í™” ê°€ì´ë“œ](../GPU_ìµœì í™”_ê°€ì´ë“œ.md)
- [í•™ìŠµ ì„¤ì • ê°€ì´ë“œ](./í•™ìŠµ_ì„¤ì •_íŒŒì¼_ìƒì„±_ê°€ì´ë“œ.md)