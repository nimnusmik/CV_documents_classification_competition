# ğŸš€ ê³ ì„±ëŠ¥ í•™ìŠµ ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [í†µí•© CLI ì¸í„°í˜ì´ìŠ¤](#í†µí•©-cli-ì¸í„°í˜ì´ìŠ¤)
3. [ì¦ê°• ì„¤ì • ìµœì í™”](#ì¦ê°•-ì„¤ì •-ìµœì í™”)
4. [Optuna í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”](#optuna-í•˜ì´í¼íŒŒë¼ë¯¸í„°-ìµœì í™”)
5. [Temperature Scaling ìº˜ë¦¬ë¸Œë ˆì´ì…˜](#temperature-scaling-ìº˜ë¦¬ë¸Œë ˆì´ì…˜)
6. [ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°€ì´ë“œ](#ì‹¤í–‰-ì‹œë‚˜ë¦¬ì˜¤ë³„-ê°€ì´ë“œ)
7. [ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§](#ì„±ëŠ¥-ëª¨ë‹ˆí„°ë§)
8. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ğŸ¯ ê°œìš”

ë³¸ ê°€ì´ë“œëŠ” ê³ ì„±ëŠ¥ ë¬¸ì„œ ë¶„ë¥˜ ëª¨ë¸ í•™ìŠµì„ ìœ„í•œ ì™„ì „í•œ ì‹¤í–‰ ê°€ì´ë“œì…ë‹ˆë‹¤. ìƒˆë¡œìš´ í†µí•© CLI ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ Optuna ìµœì í™”, Temperature Scaling ìº˜ë¦¬ë¸Œë ˆì´ì…˜, ê·¸ë¦¬ê³  ê³ ê¸‰ ì¦ê°• ê¸°ë²•ì„ ëª¨ë‘ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ëª©í‘œ ì„±ëŠ¥
- **F1 Score**: 0.940+ (ê¸°ì¡´ 0.87 ëŒ€ë¹„ ëŒ€í­ í–¥ìƒ)
- **ì‹¤í–‰ ì‹œê°„**: ì™„ì „ ìë™í™”ë¡œ ì‹œê°„ ë‹¨ì¶•
- **ì¬í˜„ì„±**: ë™ì¼ ì„¤ì •ìœ¼ë¡œ ì¼ê´€ëœ ê²°ê³¼

---

## ğŸ® í†µí•© CLI ì¸í„°í˜ì´ìŠ¤

### ìƒˆë¡œìš´ í†µí•© ì‹¤í–‰ ë°©ì‹

ëª¨ë“  í•™ìŠµ ê¸°ëŠ¥ì´ í•˜ë‚˜ì˜ CLIë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤:

```bash
python src/training/train_main.py [OPTIONS]
```

### ì£¼ìš” ì˜µì…˜ë“¤

| ì˜µì…˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|--------|
| `--config` | ì„¤ì • íŒŒì¼ ê²½ë¡œ (í•„ìˆ˜) | - |
| `--mode` | ì‹¤í–‰ ëª¨ë“œ | `full-pipeline` |
| `--optimize` | Optuna ìµœì í™” ì‚¬ìš© | `False` |
| `--n-trials` | ìµœì í™” ì‹œë„ íšŸìˆ˜ | `20` |
| `--use-calibration` | Temperature Scaling ì‚¬ìš© | `False` |
| `--auto-continue` | ìµœì í™” í›„ ìë™ ì§„í–‰ | `False` |
| `--skip-training` | í•™ìŠµ ê±´ë„ˆë›°ê³  ì¶”ë¡ ë§Œ | `False` |

### ë„ì›€ë§ í™•ì¸
```bash
python src/training/train_main.py --help
```

---

## ğŸ¨ ì¦ê°• ì„¤ì • ìµœì í™”

### ì¦ê°• íƒ€ì… ì„¤ì •

#### ê¸°ë³¸ ì¦ê°• (Basic Augmentation)
```yaml
# configs/train.yaml
train:
  use_advanced_augmentation: false  # ê¸°ë³¸ ì¦ê°• ì‚¬ìš©
```

**í¬í•¨ ê¸°ë²•:**
- ê¸°ë³¸ Resize, RandomCrop
- ìƒ‰ìƒ ì¡°ì • (Brightness, Contrast)
- ê¸°ë³¸ Normalization

#### ê³ ê¸‰ ì¦ê°• (Advanced Augmentation)
```yaml
# configs/train_highperf.yaml
train:
  use_advanced_augmentation: true   # ê³ ê¸‰ ì¦ê°• ì‚¬ìš©
  use_mixup: true                   # Mixup ì¶”ê°€
  hard_augmentation: true           # ê°•í•œ ì¦ê°• ì ìš©
```

**í¬í•¨ ê¸°ë²•:**
- ëª¨ë“  ê¸°ë³¸ ì¦ê°• +
- Hard Augmentation (ê°•í•œ ë³€í˜•)
- Mixup ë°ì´í„° ì¦ê°•
- Progressive ì¦ê°• ê°•ë„ ì¡°ì ˆ

### ë¡œê·¸ íŒŒì¼ëª…ì—ì„œ ì¦ê°• íƒ€ì… í™•ì¸

ìƒˆë¡œìš´ ë¡œê·¸ íŒŒì¼ëª… í˜•ì‹ìœ¼ë¡œ ì¦ê°• íƒ€ì…ì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ê¸°ë³¸ ì¦ê°• ë¡œê·¸
train_basic_augmentation_20250907-1830_efficientnet_b3.log

# ê³ ê¸‰ ì¦ê°• ë¡œê·¸  
train_highperf_advanced_augmentation_20250907-1830_swin-sighperf-abc123.log
```

---

## ğŸ” Optuna í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”

### ê¸°ë³¸ ìµœì í™” ì‹¤í–‰

```bash
# ê¸°ë³¸ 20ë²ˆ ì‹œë„ ìµœì í™”
python src/training/train_main.py \
    --config configs/train_highperf.yaml \
    --optimize \
    --mode highperf
```

### ì»¤ìŠ¤í…€ ìµœì í™” ì„¤ì •

```bash
# 50ë²ˆ ì‹œë„ë¡œ ì •ë°€ ìµœì í™”
python src/training/train_main.py \
    --config configs/train_highperf.yaml \
    --optimize \
    --n-trials 50 \
    --mode highperf
```

### ìµœì í™” ëŒ€ìƒ íŒŒë¼ë¯¸í„°

`configs/optuna_config.yaml`ì—ì„œ ì„¤ì •:

```yaml
search_space:
  lr: [1e-5, 1e-3]              # í•™ìŠµë¥  ë²”ìœ„
  weight_decay: [1e-6, 1e-2]    # Weight decay ë²”ìœ„
  batch_size: [16, 64]          # ë°°ì¹˜ í¬ê¸° ë²”ìœ„
  drop_rate: [0.0, 0.3]         # ë“œë¡­ì•„ì›ƒ ë¹„ìœ¨
  mixup_alpha: [0.2, 2.0]       # Mixup ì•ŒíŒŒ ê°’

optimization:
  direction: maximize            # F1 score ìµœëŒ€í™”
  n_trials: 20                  # ê¸°ë³¸ ì‹œë„ íšŸìˆ˜
  timeout: 3600                 # ìµœëŒ€ 1ì‹œê°„ ì œí•œ
```

### ìµœì í™” ê²°ê³¼ í™•ì¸

```bash
# ìµœì í™” ê²°ê³¼ í™•ì¸
ls -la experiments/optimization/

# ìµœì í™”ëœ ì„¤ì • íŒŒì¼ í™•ì¸
cat experiments/optimization/best_params_YYYYMMDD_HHMM.yaml

# ìµœì í™” ë¡œê·¸ í™•ì¸
tail -f logs/$(date +%Y%m%d)/optimization/optuna_YYYYMMDD_HHMM.log
```

---

## ğŸŒ¡ï¸ Temperature Scaling ìº˜ë¦¬ë¸Œë ˆì´ì…˜

### ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì ìš© í•™ìŠµ

```bash
# ìº˜ë¦¬ë¸Œë ˆì´ì…˜ í¬í•¨ í•™ìŠµ
python src/training/train_main.py \
    --config configs/train_highperf.yaml \
    --use-calibration \
    --mode full-pipeline
```

### ìº˜ë¦¬ë¸Œë ˆì´ì…˜ì˜ íš¨ê³¼

| ì§€í‘œ | ê¸°ë³¸ ëª¨ë¸ | ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì ìš© |
|------|-----------|------------------|
| **F1 Score** | 0.934 | 0.940+ |
| **ì‹ ë¢°ë„** | ë³´í†µ | ë†’ìŒ |
| **ì˜ˆì¸¡ í™•ë¥ ** | ê³¼ì‹  ê²½í–¥ | ë³´ì •ëœ í™•ë¥  |

### ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ê²°ê³¼ í™•ì¸

```bash
# ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ëª¨ë¸ í™•ì¸
find experiments/ -name "*calibrated*"

# ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ë¡œê·¸ í™•ì¸
grep "calibration" logs/$(date +%Y%m%d)/pipeline/full_pipeline_*.log
```

---

## ğŸš€ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°€ì´ë“œ

### 1. ğŸ† ìµœê³  ì„±ëŠ¥ (ê¶Œì¥)

**ëª©í‘œ**: ìµœê³  F1 Score ë‹¬ì„±

```bash
# í™˜ê²½ ì„¤ì •
pyenv activate cv_py3_11_9

# ì™„ì „ ìµœì í™” íŒŒì´í”„ë¼ì¸
python src/training/train_main.py \
    --config configs/train_highperf.yaml \
    --optimize \
    --n-trials 20 \
    --use-calibration \
    --mode full-pipeline \
    --auto-continue
```

**ì‹¤í–‰ ìˆœì„œ:**
1. Optuna í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™” (20íšŒ)
2. ìµœì í™”ëœ ì„¤ì •ìœ¼ë¡œ K-Fold í•™ìŠµ
3. Temperature Scaling ìº˜ë¦¬ë¸Œë ˆì´ì…˜
4. ì•™ìƒë¸” + TTA ì¶”ë¡ 
5. ì œì¶œ íŒŒì¼ ìë™ ìƒì„±

**ì˜ˆìƒ ì‹œê°„**: 2-3ì‹œê°„  
**ì˜ˆìƒ ì„±ëŠ¥**: F1 0.940+

### 2. âš¡ ë¹ ë¥¸ ì‹¤í–‰

**ëª©í‘œ**: ë¹ ë¥¸ ê²°ê³¼ í™•ì¸

```bash
# ì‚¬ì „ ìµœì í™”ëœ ì„¤ì • ì‚¬ìš©
python src/training/train_main.py \
    --config configs/train_optimized_20250907_1825.yaml \
    --use-calibration \
    --mode full-pipeline
```

**ì˜ˆìƒ ì‹œê°„**: 30-60ë¶„  
**ì˜ˆìƒ ì„±ëŠ¥**: F1 0.935+

### 3. ğŸ§ª ê°œë°œ ë° í…ŒìŠ¤íŠ¸

**ëª©í‘œ**: ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘

```bash
# ê¸°ë³¸ ëª¨ë“œë¡œ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
python src/training/train_main.py \
    --config configs/train.yaml \
    --mode basic
```

**ì˜ˆìƒ ì‹œê°„**: 15-30ë¶„  
**ì˜ˆìƒ ì„±ëŠ¥**: F1 0.89+

### 4. ğŸ”¬ ìµœì í™”ë§Œ ì‹¤í–‰

**ëª©í‘œ**: í•˜ì´í¼íŒŒë¼ë¯¸í„°ë§Œ ì°¾ê¸°

```bash
# ìµœì í™”ë§Œ ì‹¤í–‰ (í•™ìŠµ X)
python src/training/train_main.py \
    --config configs/train_highperf.yaml \
    --optimize \
    --n-trials 30 \
    --mode highperf
```

**ì˜ˆìƒ ì‹œê°„**: 1-2ì‹œê°„  
**ê²°ê³¼**: ìµœì í™”ëœ ì„¤ì • íŒŒì¼ ìƒì„±

---

## ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

### ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### WandB í™•ì¸
```bash
# WandB ë¡œê·¸ì¸ í™•ì¸
wandb status

# ì‹¤í—˜ ì¶”ì  URL
echo "WandB: https://wandb.ai/your-project/document-classification-team"
```

#### ë¡œê·¸ íŒŒì¼ ëª¨ë‹ˆí„°ë§
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
tail -f logs/$(date +%Y%m%d)/train/train_highperf_advanced_augmentation_*.log

# íŒŒì´í”„ë¼ì¸ ì§„í–‰ ìƒí™©
tail -f logs/$(date +%Y%m%d)/pipeline/full_pipeline_*.log

# Optuna ìµœì í™” ì§„í–‰
tail -f logs/$(date +%Y%m%d)/optimization/optuna_*.log
```

### ì„±ëŠ¥ ì§€í‘œ í™•ì¸

#### í•™ìŠµ ì§„í–‰ ìƒí™©
```bash
# ìµœì‹  ì‹¤í—˜ ê²°ê³¼ í™•ì¸
ls -la experiments/train/$(date +%Y%m%d)/

# Foldë³„ ì„±ëŠ¥ í™•ì¸
cat experiments/train/*/fold_results.yaml
```

#### ì œì¶œ íŒŒì¼ í™•ì¸
```bash
# ìƒì„±ëœ ì œì¶œ íŒŒì¼
ls -la submissions/$(date +%Y%m%d)/

# ì˜ˆì¸¡ ë¶„í¬ í™•ì¸
python -c "
import pandas as pd
df = pd.read_csv('submissions/$(date +%Y%m%d)/submission_latest.csv')
print('ì˜ˆì¸¡ ë¶„í¬:')
print(df['target'].value_counts().sort_index())
"
```

---

## â— ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### 1. í™˜ê²½ ê´€ë ¨ ì˜¤ë¥˜

```bash
# pyenv í™˜ê²½ ì¬ì„¤ì •
pyenv deactivate
pyenv activate cv_py3_11_9

# ì˜ì¡´ì„± ì¬ì„¤ì¹˜
pip install -r requirements.txt --force-reinstall

# Optuna ì„¤ì¹˜ í™•ì¸
pip install optuna>=4.0.0 --force-reinstall
```

#### 2. GPU ë©”ëª¨ë¦¬ ë¶€ì¡±

```bash
# ë°°ì¹˜ í¬ê¸° ì¡°ì • (config íŒŒì¼ ìˆ˜ì •)
# train_highperf.yamlì—ì„œ batch_size: 32 -> 16

# ë©”ëª¨ë¦¬ ì œí•œìœ¼ë¡œ ì‹¤í–‰
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512 python src/training/train_main.py ...

# ê·¸ë˜ë””ì–¸íŠ¸ ëˆ„ì  ì‚¬ìš© (config ìˆ˜ì •)
# gradient_accumulation_steps: 2
```

#### 3. Optuna ìµœì í™” ì˜¤ë¥˜

```bash
# Optuna ì¬ì„¤ì¹˜
pip install optuna>=4.0.0 --force-reinstall

# ì‹œë„ íšŸìˆ˜ ì¤„ì´ê¸°
python src/training/train_main.py --optimize --n-trials 5 ...

# Optuna ì„¤ì • í™•ì¸
python -c "
from src.optimization.optuna_tuner import OptunaTuner
print('âœ… Optuna ëª¨ë“ˆ ì •ìƒ')
"
```

#### 4. Temperature Scaling ì˜¤ë¥˜

```bash
# scikit-learn ì„¤ì¹˜ í™•ì¸
pip install scikit-learn>=1.0.0 --force-reinstall

# ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
python -c "
from src.calibration.temperature_scaling import TemperatureScaling
print('âœ… Temperature Scaling ëª¨ë“ˆ ì •ìƒ')
"
```

#### 5. ë¡œê·¸ íŒŒì¼ëª… ë¬¸ì œ

```bash
# ì¦ê°• ì„¤ì • í™•ì¸
grep "use_advanced_augmentation" configs/train_highperf.yaml

# ë¡œê·¸ íŒŒì¼ íŒ¨í„´ í™•ì¸
ls -la logs/$(date +%Y%m%d)/train/*augmentation*

# ì„¤ì • íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬
python -c "
from src.utils.common import load_yaml
cfg = load_yaml('configs/train_highperf.yaml')
print(f'ì¦ê°• ì„¤ì •: {cfg[\"train\"][\"use_advanced_augmentation\"]}')
"
```

### ë””ë²„ê¹… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] pyenv í™˜ê²½ í™œì„±í™” í™•ì¸
- [ ] ì˜ì¡´ì„± ì„¤ì¹˜ ì™„ë£Œ (optuna, scikit-learn í¬í•¨)
- [ ] GPU ë©”ëª¨ë¦¬ ì¶©ë¶„í•œì§€ í™•ì¸
- [ ] ì„¤ì • íŒŒì¼ ê²½ë¡œ ì •í™•í•œì§€ í™•ì¸
- [ ] ë””ìŠ¤í¬ ê³µê°„ ì¶©ë¶„í•œì§€ í™•ì¸
- [ ] WandB ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸

### ì„±ëŠ¥ ìµœì í™” íŒ

#### GPU í™œìš©ë„ ê·¹ëŒ€í™”
```bash
# ë°°ì¹˜ í¬ê¸° ìë™ ìµœì í™”
python src/utils/auto_batch_size.py --config configs/train_highperf.yaml

# ë©€í‹° GPU ì‚¬ìš© (ì„¤ì • íŒŒì¼ ìˆ˜ì •)
# device: cuda:0,1
```

#### í•™ìŠµ ì†ë„ í–¥ìƒ
```bash
# í˜¼í•© ì •ë°€ë„ í•™ìŠµ (config ì„¤ì •)
# mixed_precision: true

# ë°ì´í„°ë¡œë” ì›Œì»¤ ìˆ˜ ì¦ê°€ (config ì„¤ì •)
# num_workers: 8
```

#### ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±
```bash
# ê·¸ë˜ë””ì–¸íŠ¸ ì²´í¬í¬ì¸íŒ… (config ì„¤ì •)
# gradient_checkpointing: true

# ëª¨ë¸ ì»´íŒŒì¼ (PyTorch 2.0+)
# compile_model: true
```

---

## ğŸ“š ì¶”ê°€ ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ
- [í†µí•© ì‹¤í–‰ ê°€ì´ë“œ](../optimization/í†µí•©_ì‹¤í–‰_ê°€ì´ë“œ.md)
- [Optuna ìµœì í™” ê°€ì´ë“œ](../optimization/Optuna_í•˜ì´í¼íŒŒë¼ë¯¸í„°_ìµœì í™”_ê°€ì´ë“œ.md)
- [Temperature Scaling ê°€ì´ë“œ](../optimization/Temperature_Scaling_ìº˜ë¦¬ë¸Œë ˆì´ì…˜_ê°€ì´ë“œ.md)
- [ì‹¤í–‰ ëª…ë ¹ì–´ ê°€ì´ë“œ](../pipelines/ì‹¤í–‰_ëª…ë ¹ì–´_ê°€ì´ë“œ.md)

### ì„¤ì • íŒŒì¼ ì°¸ì¡°
- `configs/train_highperf.yaml`: ê³ ì„±ëŠ¥ í•™ìŠµ ì„¤ì •
- `configs/optuna_config.yaml`: Optuna ìµœì í™” ì„¤ì •
- `configs/train_optimized_*.yaml`: ì‚¬ì „ ìµœì í™”ëœ ì„¤ì •

### ë¡œê·¸ ë° ê²°ê³¼ ìœ„ì¹˜
- `logs/YYYYMMDD/train/`: í•™ìŠµ ë¡œê·¸ (ë‚ ì§œë³„ ë¶„ë¥˜)
- `logs/YYYYMMDD/optimization/`: ìµœì í™” ë¡œê·¸ (ë‚ ì§œë³„ ë¶„ë¥˜)
- `logs/YYYYMMDD/pipeline/`: íŒŒì´í”„ë¼ì¸ ë¡œê·¸ (ë‚ ì§œë³„ ë¶„ë¥˜)
- `experiments/train/`: ì‹¤í—˜ ê²°ê³¼
- `experiments/optimization/`: ìµœì í™” ê²°ê³¼
- `submissions/`: ì œì¶œ íŒŒì¼
